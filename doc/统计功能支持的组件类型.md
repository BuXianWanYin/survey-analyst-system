# 统计功能支持的组件类型

## 一、支持的组件类型

### 1. 选择题类型（Choice Types）

**支持统计的组件：**
- `RADIO` - 单选框
- `CHECKBOX` - 多选框
- `SELECT` - 下拉框
- `IMAGE_SELECT` - 图片选择
- `CASCADER` - 级联选择

**统计功能：**
- ✅ 选项分布统计（选择人数、比例）
- ✅ 统计表格（带条形图）
- ✅ 多种图表类型（饼状、圆环、柱状、折线、条形、表格）
- ✅ 交叉分析
- ✅ 对比分析
- ✅ 分类统计（可作为筛选条件）

### 2. 文本题类型（Text Types）

**支持统计的组件：**
- `INPUT` - 单行文本
- `TEXTAREA` - 多行文本
- `DATE` - 日期
- `TIME` - 时间
- `DATETIME` - 日期时间

**统计功能：**
- ✅ 有效答案数统计
- ✅ 总答案数统计
- ✅ 词云图（适用于 INPUT、TEXTAREA，需要后端返回 wordCloudData）

### 3. 评分题类型（Rating Types）

**支持统计的组件：**
- `RATE` - 评分（星标评分）
- `SLIDER` - 滑块

**统计功能：**
- ✅ 平均分
- ✅ 最高分
- ✅ 最低分
- ✅ 评分人数
- ✅ 评分分布图（柱状图）

### 4. 数字题类型（Number Type）

**支持统计的组件：**
- `NUMBER` - 数字输入

**统计功能：**
- ✅ 平均值
- ✅ 最大值
- ✅ 最小值
- ✅ 有效数据数

### 5. 不支持统计的组件

以下组件类型目前不支持统计功能：
- `FILE` - 文件上传（可显示上传数量，但不做详细统计）
- `IMAGE` - 图片展示（纯展示组件）
- `DESC_TEXT` - 描述文本（纯展示组件）
- `DIVIDER` - 分割线（纯展示组件）
- `CAROUSEL` - 轮播图（纯展示组件）
- 其他自定义组件

## 二、统计功能详细说明

### 2.1 选择题统计

**展示内容：**
1. **统计表格**（可选）
   - 选项列表
   - 选择人数（小计）
   - 比例（百分比 + 条形图）

2. **图表展示**（6种类型可选）
   - 饼状图（pie）
   - 圆环图（ring）
   - 柱状图（bar）
   - 折线图（line）
   - 条形图（horizontalBar）
   - 仅表格（table）

**使用场景：**
- 默认报告：显示所有题目的统计
- 分类统计：按条件筛选后显示统计
- 交叉分析：分析两个选择题的关系
- 对比分析：按某个选择题分组，对比其他题的分布

### 2.2 文本题统计

**展示内容：**
1. **基础统计**
   - 有效答案数
   - 总答案数

2. **词云图**（可选）
   - 适用于 INPUT、TEXTAREA
   - 需要后端返回 wordCloudData 数据
   - 展示高频词汇

### 2.3 评分题统计

**展示内容：**
1. **统计指标**
   - 平均分
   - 最高分
   - 最低分
   - 评分人数

2. **评分分布图**
   - 柱状图展示各分值的分布情况

### 2.4 数字题统计

**展示内容：**
- 平均值
- 最大值
- 最小值
- 有效数据数

## 三、后端支持的组件类型

后端统计服务（StatisticsServiceImpl）支持的类型：

### 选择题类型
```java
"RADIO", "CHECKBOX", "SELECT", "IMAGE_SELECT", "CASCADER"
```

### 文本题类型
```java
"INPUT", "TEXTAREA", "NUMBER", "DATE", "TIME", "DATETIME"
```

**注意：**
- 后端将 `NUMBER` 归类为文本题类型
- 前端单独处理 `NUMBER` 类型，显示数值统计

## 四、使用建议

1. **选择题**：最适合做统计分析，支持所有统计功能
2. **文本题**：基础统计 + 词云图（需要后端支持）
3. **评分题**：评分统计 + 分布图
4. **数字题**：数值统计（平均值、最大最小值）

## 五、扩展支持新组件类型

如需支持新的组件类型，需要：

1. **前端修改**（statistics.vue）：
   - 在 `isChoiceType`、`isTextType`、`isRatingType` 中添加新类型
   - 在 `getTypeLabel` 中添加类型标签映射
   - 添加对应的统计展示逻辑

2. **后端修改**（StatisticsServiceImpl.java）：
   - 在 `isChoiceType`、`isTextType` 中添加新类型
   - 在 `calculateQuestionStatistics` 中添加统计逻辑

